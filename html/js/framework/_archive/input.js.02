function Input() {;}

Input.type 	= ('ontouchstart' in window) ? 'touch' : 'mouse';

Input.eventStart  = (Input.type === 'touch') ? 'touchstart' : 'mousedown';
Input.eventMove  = (Input.type === 'touch') ? 'touchmove' : 'mousemove';
Input.eventEnd 	 = (Input.type === 'touch') ? 'touchend' : 'mouseup';
Input.eventLeave = (Input.type === 'touch') ? 'touchleave' : 'mouseup';
Input.eventCancel = (Input.type === 'touch') ? 'touchcancel' : 'mouseup';


Input.nullCoords = null;
Input.coords = Input.nullCoords;
Input.lastInput = [
	  { type:null, coords: {id:0, x:null, y:null} }
	, { type:null, coords: {id:1, x:null, y:null} }
	];

Input.init = function(w, h)
{
	App.removeAppLayerById('Input');
	
	Input.appLayer = new AppLayer('Input', true, w, h, null);
	var canvas = Input.appLayer.canvas;
	
	canvas.addEventListener(Input.eventStart, Input.handleEvent, false);
	canvas.addEventListener(Input.eventMove, Input.handleEvent, false);
	canvas.addEventListener(Input.eventEnd, Input.handleEvent, false);
}

Input.handleEvent = function(event)
{	
	event.preventDefault();	
	var inputs = [];
	
	if (event.type == Input.eventStart || event.type == Input.eventMove)
	{		
		for (var i=0; i<event.touches.length; i++)
		{
			inputs[i] =  { type:event.type, coords:Utilities.translateTouchEvent(event.touches[i]) };
		}
	}
	else if (event.type == Input.eventEnd || event.type == Input.eventLeave || event.type == Input.eventCancel)
	{
		inputs[i] = { type:event.type, coords: {x:null, y:null} };
	}
	
	Input.lastInput = inputs;
	return false;
}